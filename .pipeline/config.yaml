pipelines:
  outlink:
    blubberfile: outlink/blubber.yaml
    stages:
      - name: run-test
        build: test
        run: true
      - name: production
        build: production

  outlink-publish:
    blubberfile: outlink/blubber.yaml
    stages:
      - name: publish
        build: production
        publish:
          image:
            name: '${setup.project}-outlink'
            tags: [stable]

  outlink-transformer:
    blubberfile: outlink/transformer.yaml
    stages:
      - name: run-test
        build: test
        run: true
      - name: production
        build: production

  outlink-transformer-publish:
    blubberfile: outlink/transformer.yaml
    stages:
      - name: publish
        build: production
        publish:
          image:
            name: '${setup.project}-outlink-transformer'
            tags: [stable]

  nsfw:
    stages:
      - name: run-test
        build: test
        run: true
      - name: production
        build: production

  nsfw-publish:
    blubberfile: nsfw/blubber.yaml
    stages:
      - name: publish
        build: production
        publish:
          image:
            name: '${setup.project}-nsfw'
            tags: [stable]

  revertrisk:
    blubberfile: revertrisk/revertrisk.yaml
    stages:
      - name: run-test
        build: test
        run: true
      - name: production
        build: production

  revertrisk-publish:
    blubberfile: revertrisk/revertrisk.yaml
    stages:
      - name: publish
        build: production
        publish:
          image:
            name: '${setup.project}-revertrisk'
            tags: [stable]

  revertrisk-multilingual:
    blubberfile: revertrisk/multilingual.yaml
    stages:
      - name: run-test
        build: test
        run: true
      - name: production
        build: production

  revertrisk-multilingual-publish:
    blubberfile: revertrisk/multilingual.yaml
    stages:
      - name: publish
        build: production
        publish:
          image:
            name: '${setup.project}-revertrisk-multilingual'
            tags: [stable]

  revertrisk-wikidata:
    blubberfile: revertrisk/wikidata.yaml
    stages:
      - name: run-test
        build: test
        run: true
      - name: production
        build: production

  revertrisk-wikidata-publish:
    blubberfile: revertrisk/wikidata.yaml
    stages:
      - name: publish
        build: production
        publish:
          image:
            name: '${setup.project}-revertrisk-wikidata'
            tags: [stable]

  revscoring:
    stages:
      - name: run-test
        build: test
        run: true
      - name: production
        build: production

  revscoring-publish:
    blubberfile: revscoring/blubber.yaml
    stages:
      - name: publish
        build: production
        publish:
          image:
            name: '${setup.project}-revscoring'
            tags: [stable]

  ores-legacy:
    blubberfile: ores-legacy/blubber.yaml
    stages:
      - name: run-test
        build: test
        run: true
      - name: production
        build: production

  ores-legacy-publish:
    blubberfile: ores-legacy/blubber.yaml
    stages:
      - name: publish
        build: production
        publish:
          image:
            name: '${setup.project}-ores-legacy'
            tags: [stable]

  bloom:
    blubberfile: bloom/blubber.yaml
    stages:
      - name: run-test
        build: test
        run: true
      - name: production
        build: production

  bloom-publish:
    blubberfile: bloom/blubber.yaml
    stages:
      - name: publish
        build: production
        publish:
          image:
            name: '${setup.project}-bloom'
            tags: [stable]
